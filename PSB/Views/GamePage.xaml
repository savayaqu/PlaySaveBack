<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="PSB.Views.GamePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PSB.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:models="using:PSB.Models" xmlns:core="using:Windows.Media.Core"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Disabled">
        <StackPanel>
            <Grid>
                <Image Source="{x:Bind GameViewModel.GameHeader, Mode=OneWay}"/>
                <Image Source="{x:Bind GameViewModel.GameLogo, Mode=OneWay}" MaxWidth="400" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="16,0,0,100"/>
                <StackPanel Grid.Row="0" Grid.Column="0"  VerticalAlignment="Bottom" Margin="16">
                        <TextBlock Text="Сыграно 10 часов"/>
                        <TextBlock Text="Последний запуск 5 дней назад"/>
                    </StackPanel>
                    <!-- Кнопки на одном уровне с текстом -->
                <StackPanel Margin="16" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Bottom" Orientation="Horizontal" Spacing="24">
                        <Button Content="Облачное сохранение"/>
                        <Button Content="Настройки" />
                    </StackPanel>
            </Grid>
            
            <Grid ColumnDefinitions=" *, 300" RowDefinitions="Auto, Auto, Auto" RowSpacing="15" ColumnSpacing="15" Margin="16,0">
                
                
                <StackPanel Orientation="Vertical" Grid.Column="0" Grid.Row="1">
                    <ContentControl  Content="{x:Bind GameViewModel.GameDescriptionXaml, Mode=OneWay}"/>

                    <ScrollViewer HorizontalScrollMode="Auto" 
      HorizontalScrollBarVisibility="Auto"
      VerticalScrollMode="Disabled"
      VerticalScrollBarVisibility="Hidden">
                        <StackPanel Orientation="Horizontal">
                            <!-- Видео -->
                            <ItemsControl ItemsSource="{x:Bind GameViewModel.SteamGame.Movies, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="models:Movie">
                                        <StackPanel Margin="5">
                                            <Image Source="{x:Bind Thumbnail}" 
                       Width="200" Height="120" 
                       Stretch="UniformToFill"/>
                                            <MediaPlayerElement Width="200" Height="120"
                                    AutoPlay="False"
                                    AreTransportControlsEnabled="True"
                                    Source="{x:Bind VideoSource, Mode=OneWay}"/>

                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Скриншоты -->
                            <ItemsControl ItemsSource="{x:Bind GameViewModel.SteamGame.Screenshots, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="models:Screenshot">
                                        <Image Source="{x:Bind PathThumbnail}" 
                   Width="200" Height="120" 
                   Margin="5" Stretch="UniformToFill"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>


                </StackPanel>


                <!-- Второй StackPanel теперь внутри первого -->
                <StackPanel Orientation="Vertical" Grid.Column="1">
                    <!-- Здесь можешь добавить другие элементы -->
                    <TextBlock Text="Здесь достижения и пк"/>
                </StackPanel>

            </Grid>
        </StackPanel>
    </ScrollViewer>

</Page>
